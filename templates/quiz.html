<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Python Quiz - PythonLearn</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Animation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <!-- ECharts for Data Visualization -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>

    <!-- Custom Styles -->
    <style>
      :root {
        /* -------- Modern Tech Brand Colors (freeCodeCamp/Codecademy style) -------- */
        --primary-600: #3b82f6; /* blue - primary action */
        --primary-700: #2563eb;
        --primary-800: #1d4ed8;

        --secondary-600: #6366f1; /* indigo - secondary action */
        --secondary-700: #4f46e5;
        --secondary-800: #4338ca;

        --accent-500: #10b981; /* green - success/positive */
        --accent-600: #059669;

        /* -------- Neutral light-scale -------- */
        --slate-50: #f8fafc; /* page bg        */
        --slate-100: #f1f5f9; /* card bg        */
        --slate-200: #e2e8f0; /* border / line  */
        --slate-300: #cbd5e1;
        --slate-400: #94a3b8;
        --slate-600: #475569; /* body text      */
        --slate-700: #334155; /* heading text   */
        --slate-800: #1e293b;
        --slate-900: #0f172a; /* darkest text   */

        --white: #ffffff;
      }

      /* ---------------------------------------------------------
   DARK-MODE OVERRIDES (auto or via data-theme="dark")
   --------------------------------------------------------- */
      [data-theme="dark"] {
        /* desaturated but recognisable brand colours */
        --primary-600: #2dd4bf; /* brighter teal   */
        --primary-700: #14b8a6;
        --primary-800: #0d9488;

        --secondary-600: #fb923c; /* softer orange   */
        --secondary-700: #f97316;
        --secondary-800: #ea580c;

        --accent-500: #4ade80; /* mint green       */

        /* inverted neutral scale */
        --slate-50: #0b1120; /* page bg          */
        --slate-100: #111827; /* card / elevated  */
        --slate-200: #1f2937; /* border           */
        --slate-300: #374151;
        --slate-400: #4b5563;
        --slate-600: #9ca3af; /* body text        */
        --slate-700: #d1d5db; /* heading text     */
        --slate-800: #e5e7eb;
        --slate-900: #f9fafb; /* lightest text    */

        --white: #0b1120; /* same as page bg  */
      }

      /* automatic dark if user has system preference */
      @media (prefers-color-scheme: dark) {
        :root:not([data-theme="light"]) {
          /* copy the exact same block as [data-theme="dark"] */
          --primary-600: #2dd4bf;
          --primary-700: #14b8a6;
          --primary-800: #0d9488;
          --secondary-600: #fb923c;
          --secondary-700: #f97316;
          --secondary-800: #ea580c;
          --accent-500: #4ade80;
          --slate-50: #0b1120;
          --slate-100: #111827;
          --slate-200: #1f2937;
          --slate-300: #374151;
          --slate-400: #4b5563;
          --slate-600: #9ca3af;
          --slate-700: #d1d5db;
          --slate-800: #e5e7eb;
          --slate-900: #f9fafb;
          --white: #0b1120;
        }
      }

      * {
        font-family: "Inter", sans-serif;
      }

      body {
        background: var(--slate-50);
        color: var(--slate-900);
        line-height: 1.6;
        overflow-x: hidden;
      }

      /* Premium Navigation - Sticky with better styling */
      .nav-glassmorphism {
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .nav-link {
        position: relative;
        font-weight: 500;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .nav-link::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(
          90deg,
          var(--primary-600),
          var(--secondary-600)
        );
        transform: scaleX(0);
        transition: transform 0.3s ease;
      }

      .nav-link:hover::after,
      .nav-link.active::after {
        transform: scaleX(1);
      }

      .nav-link.active {
        color: var(--primary-600);
        font-weight: 600;
      }

      /* Custom Button Styles */
      .btn-login,
      .btn-signup {
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .btn-login:hover,
      .btn-signup:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      }

      .btn-login::before,
      .btn-signup::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.2);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .btn-login:hover::before,
      .btn-signup:hover::before {
        opacity: 1;
      }

      .btn-login {
        background: var(--secondary-600);
        color: var(--white);
        border: 2px solid var(--secondary-600);
      }

      .btn-signup {
        background: var(--primary-600);
        color: var(--white);
        border: 2px solid var(--primary-600);
      }

      .btn-login:hover {
        background: var(--secondary-700);
      }

      .btn-signup:hover {
        background: var(--primary-700);
      }

      /* Premium Cards */
      .card-premium {
        background: var(--white);
        border-radius: 20px;
        padding: 2rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        border: 1px solid rgba(0, 0, 0, 0.05);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .card-premium::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary-600),
          var(--secondary-600)
        );
        transform: scaleX(0);
        transition: transform 0.3s ease;
      }

      .card-premium:hover::before {
        transform: scaleX(1);
      }

      .card-premium:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      }

      /* Premium Typography */
      .section-title {
        font-size: clamp(2rem, 5vw, 3rem);
        font-weight: 800;
        letter-spacing: -0.02em;
        line-height: 1.2;
        margin-bottom: 1rem;
      }

      .section-subtitle {
        font-size: clamp(1rem, 2vw, 1.25rem);
        font-weight: 400;
        line-height: 1.6;
        color: var(--slate-600);
      }

      .text-gradient {
        background: linear-gradient(
          135deg,
          var(--primary-600),
          var(--secondary-600)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Animations */
      .animate-on-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .animate-in {
        opacity: 1;
        transform: translateY(0);
      }

      /* Smooth Scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* Quiz-specific premium styles */
      .quiz-container {
        background: var(--white);
        border-radius: 20px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        transition: all 0.3s ease;
        border: 1px solid var(--slate-200);
      }

      .quiz-container:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      }

      .quiz-header {
        background: linear-gradient(
          135deg,
          var(--primary-600),
          var(--primary-700)
        );
        color: white;
        padding: 2rem;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .quiz-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
        opacity: 0.3;
        z-index: 1;
      }

      .quiz-header > * {
        position: relative;
        z-index: 2;
      }

      .question-card {
        background: var(--slate-100);
        border-radius: 16px;
        padding: 2rem;
        margin-bottom: 1.5rem;
        transition: all 0.3s ease;
        border: 1px solid var(--slate-200);
      }

      .question-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        border-color: var(--primary-300);
      }

      .option-button {
        width: 100%;
        padding: 1rem;
        text-align: left;
        border: 2px solid var(--slate-200);
        border-radius: 8px;
        background: var(--white);
        transition: all 0.3s ease;
        margin-bottom: 0.75rem;
        cursor: pointer;
        font-weight: 500;
        color: var(--slate-700);
      }

      .option-button:hover {
        border-color: var(--primary-600);
        background: var(--slate-50);
        transform: translateX(4px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      }

      .option-button.selected {
        border-color: var(--primary-600);
        background: var(--primary-600);
        color: white;
        box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3);
      }

      .option-button.correct {
        border-color: var(--accent-600);
        background: var(--accent-600);
        color: white;
        box-shadow: 0 4px 10px rgba(16, 185, 129, 0.3);
      }

      .option-button.incorrect {
        border-color: #ef4444;
        background: #ef4444;
        color: white;
        box-shadow: 0 4px 10px rgba(239, 68, 68, 0.3);
      }

      .option-button:disabled {
        cursor: not-allowed;
        opacity: 0.7;
      }

      .progress-bar {
        height: 8px;
        background: var(--slate-200);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 1.5rem;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--primary-600),
          var(--primary-700)
        );
        transition: width 0.5s ease;
      }

      .quiz-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .stat-card {
        text-align: center;
        padding: 1rem;
        background: var(--slate-100);
        border-radius: 12px;
        border: 1px solid var(--slate-200);
        transition: all 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      }

      .stat-number {
        font-size: 2rem;
        font-weight: 800;
        color: var(--primary-600);
        display: block;
      }

      .feedback-panel {
        padding: 1rem;
        border-radius: 8px;
        margin-top: 1rem;
        transition: all 0.3s ease;
      }

      .feedback-correct {
        background: #dcfce7;
        border: 1px solid #bbf7d0;
        color: #166534;
      }

      .feedback-incorrect {
        background: #fef2f2;
        border: 1px solid #fecaca;
        color: #dc2626;
      }

      .feedback-explanation {
        background: #f0f9ff;
        border: 1px solid #bae6fd;
        color: #0c4a6e;
      }

      .quiz-complete {
        text-align: center;
        padding: 3rem 2rem;
      }

      .score-circle {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background: conic-gradient(
          var(--primary-600) 0deg,
          var(--slate-200) 0deg
        );
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 2rem;
        position: relative;
      }

      .score-circle::before {
        content: "";
        position: absolute;
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: var(--white);
      }

      .score-text {
        position: relative;
        z-index: 1;
        font-size: 2rem;
        font-weight: 800;
        color: var(--primary-600);
      }

      .topic-selector {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .topic-card {
        background: var(--white);
        border: 2px solid var(--slate-200);
        border-radius: 16px;
        padding: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      }

      .topic-card:hover {
        border-color: var(--primary-600);
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      }

      .topic-card.selected {
        border-color: var(--primary-600);
        background: var(--slate-50);
        box-shadow: 0 8px 25px rgba(59, 130, 246, 0.2);
      }

      .topic-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
      }

      .topic-card:hover .topic-icon {
        transform: scale(1.1);
      }

      .timer {
        background: #fef3c7;
        color: #92400e;
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }

      .timer.warning {
        background: #fecaca;
        color: #dc2626;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .quiz-body {
          padding: 1.5rem;
        }

        .question-card {
          padding: 1.5rem;
        }

        .quiz-stats {
          grid-template-columns: repeat(2, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 nav-glassmorphism">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
          <!-- Logo -->
          <div class="flex items-center">
            <div class="text-3xl font-bold text-gradient">üêç PythonLearn</div>
          </div>

          <!-- Desktop Navigation -->
          <div class="hidden md:flex items-center space-x-10">
            <a
              href="/"
              class="nav-link text-slate-700 hover:text-primary-600 px-3 py-2"
              >Home</a
            >
            <a
              href="/course"
              class="nav-link text-slate-700 hover:text-primary-600 px-3 py-2"
              >Course</a
            >
            <a
              href="/playground"
              class="nav-link text-slate-700 hover:text-primary-600 px-3 py-2"
              >Playground</a
            >
            <a
              href="/quiz"
              class="nav-link text-slate-700 hover:text-primary-600 px-3 py-2 active"
              >Quiz</a
            >
            <a
              href="/login"
              class="px-5 py-2 rounded-lg text-white font-semibold btn-signup transition duration-300"
            >
              Login
            </a>
            <button
              id="theme-toggle"
              class="p-3 rounded-xl text-slate-700 hover:bg-slate-100 hover:text-primary-600 transition-all duration-300"
            >
              <span id="theme-icon">üåô</span>
            </button>
          </div>

          <!-- Mobile Menu Button -->
          <div class="md:hidden">
            <button
              id="mobile-menu-btn"
              class="text-slate-700 hover:text-primary-600"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                ></path>
              </svg>
            </button>
          </div>
        </div>

        <!-- Mobile Navigation -->
        <div id="mobile-menu" class="hidden md:hidden">
          <div
            class="px-2 pt-2 pb-3 space-y-1 bg-white rounded-xl shadow-lg mt-2 border border-slate-200"
          >
            <a
              href="/"
              class="block px-3 py-2 text-slate-700 hover:text-primary-600 hover:bg-slate-50 rounded-lg transition-colors"
              >Home</a
            >
            <a
              href="/course"
              class="block px-3 py-2 text-slate-700 hover:text-primary-600 hover:bg-slate-50 rounded-lg transition-colors"
              >Course</a
            >
            <a
              href="/playground"
              class="block px-3 py-2 text-slate-700 hover:text-primary-600 hover:bg-slate-50 rounded-lg transition-colors"
              >Playground</a
            >
            <a
              href="/quiz"
              class="block px-3 py-2 text-slate-700 hover:text-primary-600 hover:bg-slate-50 rounded-lg transition-colors"
              >Quiz</a
            >
          </div>
        </div>
      </div>
    </nav>

    <!-- Quiz Header -->
    <section
      class="pt-24 pb-12 bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600 text-white relative overflow-hidden"
    >
      <div
        class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10"
      >
        <h1
          class="text-4xl md:text-5xl font-bold mb-4 section-title text-white"
        >
          Python Quiz Challenge
        </h1>
        <p
          class="text-xl mb-8 max-w-3xl mx-auto section-subtitle text-white/95"
        >
          Test your Python knowledge with our interactive quizzes. Get instant
          feedback and detailed explanations for every question.
        </p>
        <div class="flex flex-wrap justify-center gap-4 text-sm">
          <span
            class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full border border-white/30 font-semibold"
            >Multiple Topics</span
          >
          <span
            class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full border border-white/30 font-semibold"
            >Instant Feedback</span
          >
          <span
            class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full border border-white/30 font-semibold"
            >Detailed Explanations</span
          >
          <span
            class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full border border-white/30 font-semibold"
            >Progress Tracking</span
          >
        </div>
      </div>
    </section>

    <!-- Topic Selection -->
    <section class="py-12 bg-slate-50" id="topic-selection">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-8 animate-on-scroll">
          <h2 class="section-title text-slate-900 mb-4">
            Choose Your Quiz Topic
          </h2>
          <p class="section-subtitle max-w-3xl mx-auto">
            Select a topic to test your Python knowledge
          </p>
        </div>

        <div class="topic-selector">
          <div
            class="topic-card card-premium animate-on-scroll"
            data-topic="basics"
          >
            <div class="topic-icon">üêç</div>
            <h3 class="text-xl font-bold mb-2 text-slate-900">Python Basics</h3>
            <p class="text-slate-600">
              Variables, data types, and basic syntax
            </p>
            <div class="mt-4 text-sm text-blue-600 font-semibold">
              15 Questions ‚Ä¢ 10 min
            </div>
          </div>

          <div
            class="topic-card card-premium animate-on-scroll"
            data-topic="operators"
          >
            <div class="topic-icon">‚ûó</div>
            <h3 class="text-xl font-bold mb-2 text-slate-900">Operators</h3>
            <p class="text-slate-600">
              Arithmetic, comparison, and logical operators
            </p>
            <div class="mt-4 text-sm text-blue-600 font-semibold">
              12 Questions ‚Ä¢ 8 min
            </div>
          </div>

          <div
            class="topic-card card-premium animate-on-scroll"
            data-topic="control-flow"
          >
            <div class="topic-icon">üîÑ</div>
            <h3 class="text-xl font-bold mb-2 text-slate-900">Control Flow</h3>
            <p class="text-slate-600">If statements, loops, and conditionals</p>
            <div class="mt-4 text-sm text-blue-600 font-semibold">
              18 Questions ‚Ä¢ 12 min
            </div>
          </div>

          <div
            class="topic-card card-premium animate-on-scroll"
            data-topic="functions"
          >
            <div class="topic-icon">‚ö°</div>
            <h3 class="text-xl font-bold mb-2 text-slate-900">Functions</h3>
            <p class="text-slate-600">
              Function definition, parameters, and return values
            </p>
            <div class="mt-4 text-sm text-blue-600 font-semibold">
              14 Questions ‚Ä¢ 10 min
            </div>
          </div>

          <div
            class="topic-card card-premium animate-on-scroll"
            data-topic="data-structures"
          >
            <div class="topic-icon">üìä</div>
            <h3 class="text-xl font-bold mb-2 text-slate-900">
              Data Structures
            </h3>
            <p class="text-slate-600">Lists, dictionaries, tuples, and sets</p>
            <div class="mt-4 text-sm text-blue-600 font-semibold">
              20 Questions ‚Ä¢ 15 min
            </div>
          </div>

          <div
            class="topic-card card-premium animate-on-scroll"
            data-topic="oop"
          >
            <div class="topic-icon">üèóÔ∏è</div>
            <h3 class="text-xl font-bold mb-2 text-slate-900">
              Object-Oriented Programming
            </h3>
            <p class="text-slate-600">
              Classes, objects, inheritance, and polymorphism
            </p>
            <div class="mt-4 text-sm text-blue-600 font-semibold">
              15 Questions ‚Ä¢ 12 min
            </div>
          </div>

          <div
            class="topic-card card-premium animate-on-scroll"
            data-topic="file-handling"
          >
            <div class="topic-icon">üìÅ</div>
            <h3 class="text-xl font-bold mb-2 text-slate-900">
              File Handling & I/O
            </h3>
            <p class="text-slate-600">Reading, writing, and managing files</p>
            <div class="mt-4 text-sm text-blue-600 font-semibold">
              15 Questions ‚Ä¢ 12 min
            </div>
          </div>

          <div
            class="topic-card card-premium animate-on-scroll"
            data-topic="exceptions"
          >
            <div class="topic-icon">‚ö†Ô∏è</div>
            <h3 class="text-xl font-bold mb-2 text-slate-900">
              Error Handling & Exceptions
            </h3>
            <p class="text-slate-600">
              Try-except blocks and exception handling
            </p>
            <div class="mt-4 text-sm text-blue-600 font-semibold">
              15 Questions ‚Ä¢ 12 min
            </div>
          </div>

          <div
            class="topic-card card-premium animate-on-scroll"
            data-topic="modules"
          >
            <div class="topic-icon">üì¶</div>
            <h3 class="text-xl font-bold mb-2 text-slate-900">
              Modules & Packages
            </h3>
            <p class="text-slate-600">
              Importing, creating, and organizing modules
            </p>
            <div class="mt-4 text-sm text-blue-600 font-semibold">
              15 Questions ‚Ä¢ 12 min
            </div>
          </div>

          <div
            class="topic-card card-premium animate-on-scroll"
            data-topic="mixed"
          >
            <div class="topic-icon">üéØ</div>
            <h3 class="text-xl font-bold mb-2 text-slate-900">
              Mixed Challenge
            </h3>
            <p class="text-slate-600">Random questions from all topics</p>
            <div class="mt-4 text-sm text-blue-600 font-semibold">
              25 Questions ‚Ä¢ 20 min
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quiz Interface -->
    <section class="py-12 bg-slate-50 hidden" id="quiz-interface">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Quiz Stats -->
        <div class="quiz-stats">
          <div class="stat-card card-premium">
            <span class="stat-number" id="current-question">1</span>
            <span class="text-sm text-slate-600 font-medium">Question</span>
          </div>
          <div class="stat-card card-premium">
            <span
              class="stat-number"
              id="quiz-score"
              style="color: var(--accent-600)"
              >0</span
            >
            <span class="text-sm text-slate-600 font-medium">Correct</span>
          </div>
          <div class="stat-card card-premium timer" id="timer-card">
            <span class="stat-number" id="quiz-timer" style="color: #92400e"
              >10:00</span
            >
            <span class="text-sm text-slate-600 font-medium">Time</span>
          </div>
          <div class="stat-card card-premium">
            <span
              class="stat-number"
              id="quiz-progress"
              style="color: var(--secondary-600)"
              >0%</span
            >
            <span class="text-sm text-slate-600 font-medium">Progress</span>
          </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
        </div>

        <!-- Quiz Container -->
        <div class="quiz-container card-premium">
          <div class="quiz-header">
            <h2 class="text-2xl font-bold mb-2" id="quiz-title">
              Python Basics Quiz
            </h2>
            <p class="text-blue-100" id="quiz-description">
              Test your fundamental Python knowledge
            </p>
          </div>

          <div class="quiz-body">
            <!-- Question Content -->
            <div id="question-content">
              <div class="question-card">
                <div class="flex justify-between items-start mb-4">
                  <h3
                    class="text-xl font-semibold text-slate-900"
                    id="question-text"
                  >
                    Which of the following is the correct way to create a
                    variable in Python?
                  </h3>
                  <span
                    class="text-sm text-slate-500 font-medium"
                    id="question-number"
                    >Question 1 of 15</span
                  >
                </div>

                <div class="space-y-3" id="options-container">
                  <button class="option-button" data-option="0">
                    A. var x = 5
                  </button>
                  <button class="option-button" data-option="1">
                    B. x = 5
                  </button>
                  <button class="option-button" data-option="2">
                    C. int x = 5
                  </button>
                  <button class="option-button" data-option="3">
                    D. create x = 5
                  </button>
                </div>

                <div id="feedback-container"></div>
              </div>
            </div>

            <!-- Quiz Navigation -->
            <div class="flex justify-between items-center mt-6">
              <button
                id="prev-button"
                class="px-6 py-3 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 transition-colors font-medium"
                disabled
              >
                Previous
              </button>

              <div class="flex space-x-4">
                <button
                  id="skip-button"
                  class="px-6 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors font-medium"
                >
                  Skip Question
                </button>
                <button
                  id="next-button"
                  class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"
                  disabled
                >
                  Next Question
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quiz Results -->
    <section class="py-12 bg-slate-50 hidden" id="quiz-results">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="quiz-container card-premium">
          <div class="quiz-complete">
            <div class="score-circle" id="score-circle">
              <div class="score-text" id="final-score">85%</div>
            </div>

            <h2 class="text-3xl font-bold mb-4 text-slate-900">
              Quiz Complete!
            </h2>
            <p class="text-xl text-slate-600 mb-6" id="score-message">
              Excellent work! You have a strong understanding of Python basics.
            </p>

            <div class="grid md:grid-cols-3 gap-6 mb-8">
              <div class="text-center card-premium p-6">
                <div
                  class="text-3xl font-bold mb-2"
                  style="color: var(--accent-600)"
                  id="correct-answers"
                >
                  12
                </div>
                <div class="text-slate-600 font-medium">Correct Answers</div>
              </div>
              <div class="text-center card-premium p-6">
                <div
                  class="text-3xl font-bold mb-2 text-red-600"
                  id="incorrect-answers"
                >
                  3
                </div>
                <div class="text-slate-600 font-medium">Incorrect Answers</div>
              </div>
              <div class="text-center card-premium p-6">
                <div
                  class="text-3xl font-bold mb-2"
                  style="color: var(--secondary-600)"
                  id="total-time"
                >
                  8:45
                </div>
                <div class="text-slate-600 font-medium">Time Taken</div>
              </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-center">
              <button
                id="retake-quiz"
                class="px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-semibold shadow-lg hover:shadow-xl hover:-translate-y-1"
              >
                Retake Quiz
              </button>
              <button
                id="review-answers"
                class="px-8 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all font-semibold shadow-lg hover:shadow-xl hover:-translate-y-1"
              >
                Review Answers
              </button>
              <button
                id="try-another-topic"
                class="px-8 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold shadow-lg hover:shadow-xl hover:-translate-y-1"
              >
                Try Another Topic
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Performance Analytics -->
    <section class="py-16 bg-slate-50" id="performance-section">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-8 animate-on-scroll">
          <h2 class="section-title text-slate-900 mb-4">
            Your Quiz Performance
          </h2>
          <p class="section-subtitle max-w-3xl mx-auto">
            Track your progress and identify areas for improvement
          </p>
        </div>

        <div class="grid md:grid-cols-2 gap-8">
          <!-- Score Chart -->
          <div class="bg-white p-6 rounded-xl shadow-lg card-premium">
            <h3 class="text-xl font-bold mb-4 text-slate-900">
              Recent Quiz Scores
            </h3>
            <div id="score-chart" style="height: 300px"></div>
          </div>

          <!-- Topic Performance -->
          <div class="bg-white p-6 rounded-xl shadow-lg card-premium">
            <h3 class="text-xl font-bold mb-4 text-slate-900">
              Performance by Topic
            </h3>
            <div id="topic-chart" style="height: 300px"></div>
          </div>
        </div>

        <!-- Achievement Badges -->
        <div class="mt-12">
          <h3 class="text-2xl font-bold text-center mb-8 text-slate-900">
            Your Achievements
          </h3>
          <div class="flex flex-wrap justify-center gap-4">
            <div
              class="bg-white p-6 rounded-xl shadow-lg card-premium text-center group"
            >
              <div
                class="text-4xl mb-2 group-hover:scale-110 transition-transform"
              >
                üèÜ
              </div>
              <div class="font-semibold text-slate-900">First Quiz</div>
              <div class="text-sm text-slate-600">
                Completed your first quiz
              </div>
            </div>
            <div
              class="bg-white p-6 rounded-xl shadow-lg card-premium text-center group"
            >
              <div
                class="text-4xl mb-2 group-hover:scale-110 transition-transform"
              >
                üéØ
              </div>
              <div class="font-semibold text-slate-900">Perfect Score</div>
              <div class="text-sm text-slate-600">Scored 100% on a quiz</div>
            </div>
            <div
              class="bg-white p-6 rounded-xl shadow-lg card-premium text-center group"
            >
              <div
                class="text-4xl mb-2 group-hover:scale-110 transition-transform"
              >
                ‚ö°
              </div>
              <div class="font-semibold text-slate-900">Speed Demon</div>
              <div class="text-sm text-slate-600">
                Completed quiz in record time
              </div>
            </div>
            <div
              class="bg-white p-6 rounded-xl shadow-lg card-premium text-center opacity-50 group"
            >
              <div
                class="text-4xl mb-2 group-hover:scale-110 transition-transform"
              >
                üî•
              </div>
              <div class="font-semibold text-slate-900">Streak Master</div>
              <div class="text-sm text-slate-600">5 quizzes in a row</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer
      class="bg-gradient-to-br from-slate-900 to-slate-800 text-slate-200 py-16"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid md:grid-cols-4 gap-12">
          <div>
            <div class="text-3xl font-bold text-gradient mb-6">
              üêç PythonLearn
            </div>
            <p class="text-slate-400 mb-6 leading-relaxed">
              Learn Python the smart way with our interactive platform designed
              for modern learners.
            </p>
            <div class="flex space-x-6">
              <a
                href="#"
                class="text-slate-400 hover:text-primary-400 transition-colors"
                >Twitter</a
              >
              <a
                href="#"
                class="text-slate-400 hover:text-primary-400 transition-colors"
                >LinkedIn</a
              >
              <a
                href="#"
                class="text-slate-400 hover:text-primary-400 transition-colors"
                >GitHub</a
              >
            </div>
          </div>

          <div>
            <h4 class="font-bold text-lg text-white mb-6">Learning</h4>
            <ul class="space-y-3 text-slate-400">
              <li>
                <a
                  href="/course"
                  class="hover:text-primary-400 transition-colors"
                  >Course Curriculum</a
                >
              </li>
              <li>
                <a
                  href="/playground"
                  class="hover:text-primary-400 transition-colors"
                  >Code Playground</a
                >
              </li>
              <li>
                <a href="/quiz" class="hover:text-primary-400 transition-colors"
                  >Interactive Quizzes</a
                >
              </li>
              <li>
                <a
                  href="/projects"
                  class="hover:text-primary-400 transition-colors"
                  >Project Gallery</a
                >
              </li>
            </ul>
          </div>

          <div>
            <h4 class="font-bold text-lg text-white mb-6">Resources</h4>
            <ul class="space-y-3 text-slate-400">
              <li>
                <a
                  href="/about"
                  class="hover:text-primary-400 transition-colors"
                  >About Us</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-primary-400 transition-colors"
                  >Blog</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-primary-400 transition-colors"
                  >Documentation</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-primary-400 transition-colors"
                  >Community</a
                >
              </li>
            </ul>
          </div>

          <div>
            <h4 class="font-bold text-lg text-white mb-6">Support</h4>
            <ul class="space-y-3 text-slate-400">
              <li>
                <a href="#" class="hover:text-primary-400 transition-colors"
                  >Help Center</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-primary-400 transition-colors"
                  >Contact Us</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-primary-400 transition-colors"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-primary-400 transition-colors"
                  >Terms of Service</a
                >
              </li>
            </ul>
          </div>
        </div>

        <div
          class="border-t border-slate-800 mt-12 pt-8 text-center text-slate-400"
        >
          <p>
            &copy; 2024 PythonLearn. All rights reserved. Made with ‚ù§Ô∏è for
            Python learners worldwide.
          </p>
        </div>
      </div>
    </footer>

    <!-- Main JavaScript -->
    <script src="{{url_for('static', filename='main.js')}}"></script>

    <!-- Quiz-specific JavaScript -->
    <script>
      /* ===========================================================
   PYTHON QUIZ ‚Äì BUG-FREE, FULLY STAND-ALONE
   =========================================================== */
      class PythonQuiz {
        constructor() {
          this.currentTopic = null;
          this.questions = [];
          this.currentIndex = 0;
          this.score = 0;
          this.answers = [];
          this.timeRemaining = 0;
          this.timer = null;
          this.startTime = null;

          /* --------------  QUIZ BANK  ---------------- */
          this.quizData = {
            basics: {
              title: "Python Basics Quiz",
              description: "Test your fundamental Python knowledge",
              timeLimit: 600, // 10 min
              questions: [
                // ORIGINAL QUESTIONS
                {
                  question:
                    "Which of the following is the correct way to create a variable in Python?",
                  options: ["var x = 5", "x = 5", "int x = 5", "create x = 5"],
                  correct: 1,
                  explanation:
                    "In Python you just assign:  x = 5 .  No declarative keyword is needed.",
                },
                {
                  question: "What will print(type(42)) output?",
                  options: [
                    "<class 'int'>",
                    "<class 'float'>",
                    "<class 'number'>",
                    "Error",
                  ],
                  correct: 0,
                  explanation: "42 is an integer literal ‚áí <class 'int'>.",
                },
                {
                  question:
                    "Which of these is **not** a valid Python string delimiter?",
                  options: ["'hi'", '"hi"', "`hi`", '"""hi"""'],
                  correct: 2,
                  explanation:
                    "Back-quotes (`) are **not** string delimiters in Python.",
                },
                // ADD THESE 10 NEW BASICS QUESTIONS
                {
                  question: "What is the result of: type(3.14)?",
                  options: [
                    "<class 'int'>",
                    "<class 'float'>",
                    "<class 'decimal'>",
                    "<class 'double'>",
                  ],
                  correct: 1,
                  explanation:
                    "3.14 is a floating-point literal ‚áí <class 'float'>.",
                },
                {
                  question:
                    "Which of these variable names is invalid in Python?",
                  options: ["_user", "2nd_name", "user_name", "userName"],
                  correct: 1,
                  explanation:
                    "Variable names cannot start with a number in Python.",
                },
                {
                  question: "What is the output of: print(type(True))",
                  options: [
                    "<class 'bool'>",
                    "<class 'int'>",
                    "<class 'str'>",
                    "Error",
                  ],
                  correct: 0,
                  explanation: "True is a boolean literal ‚áí <class 'bool'>.",
                },
                {
                  question: "Which operator checks the type of a variable?",
                  options: ["typeof()", "type()", "checktype()", "gettype()"],
                  correct: 1,
                  explanation: "type() function returns the type of an object.",
                },
                {
                  question: "What is the result of: isinstance(5, int)?",
                  options: ["True", "False", "Error", "5"],
                  correct: 0,
                  explanation:
                    "isinstance() checks if 5 is an instance of int class.",
                },
                {
                  question: "Which of these is a mutable data type?",
                  options: ["tuple", "string", "list", "int"],
                  correct: 2,
                  explanation:
                    "Lists are mutable - you can change their contents after creation.",
                },
                {
                  question: "What does id() function return?",
                  options: [
                    "Variable name",
                    "Memory address",
                    "Data type",
                    "Object value",
                  ],
                  correct: 1,
                  explanation: "id() returns the memory address of an object.",
                },
                {
                  question: "What is the output of: x, y = 1, 2; print(x, y)",
                  options: ["1 2", "2 1", "Error", "1, 2"],
                  correct: 0,
                  explanation: "Multiple assignment: x gets 1, y gets 2.",
                },
                {
                  question: "Which keyword deletes a variable?",
                  options: ["remove", "delete", "del", "destroy"],
                  correct: 2,
                  explanation:
                    "del keyword is used to delete variables in Python.",
                },
                {
                  question: "What is the result of: None == False?",
                  options: ["True", "False", "Error", "None"],
                  correct: 1,
                  explanation: "None is not equal to False in Python.",
                },
              ],
            },
            operators: {
              title: "Python Operators Quiz",
              description: "Test your knowledge of Python operators",
              timeLimit: 480, // 8 min
              questions: [
                // ORIGINAL QUESTIONS
                {
                  question: "What is 10 // 3 ?",
                  options: ["3.33", "3", "4", "3.0"],
                  correct: 1,
                  explanation: "// is floor-division ‚áí 3 .",
                },
                {
                  question: "Which operator is exponentiation?",
                  options: ["^", "**", "^^", "exp"],
                  correct: 1,
                  explanation: "** is exponentiation:  2**3 = 8 .",
                },
                // ADD THESE 10 NEW OPERATORS QUESTIONS
                {
                  question: "What is the result of: 2 ** 3 ** 2?",
                  options: ["64", "512", "81", "18"],
                  correct: 1,
                  explanation:
                    "Exponentiation is right-associative: 2 ** (3 ** 2) = 2 ** 9 = 512",
                },
                {
                  question: "What does 5 % 2 return?",
                  options: ["2.5", "2", "1", "0"],
                  correct: 2,
                  explanation:
                    "% is modulo operator: 5 divided by 2 leaves remainder 1.",
                },
                {
                  question: "What is 15 // 4?",
                  options: ["3.75", "3", "4", "3.0"],
                  correct: 1,
                  explanation: "// is floor division: 15 √∑ 4 = 3 remainder 3.",
                },
                {
                  question:
                    "Which operator checks if both objects are the same?",
                  options: ["==", "===", "is", "equals"],
                  correct: 2,
                  explanation:
                    "is operator checks if both variables point to the same object in memory.",
                },
                {
                  question: "What is the result of: 2 + 3 * 4?",
                  options: ["20", "14", "9", "16"],
                  correct: 1,
                  explanation:
                    "Multiplication has higher precedence: 3 * 4 = 12, then 2 + 12 = 14.",
                },
                {
                  question: "What does += operator do?",
                  options: [
                    "Addition and assignment",
                    "Increment only",
                    "Concatenation",
                    "Multiplication",
                  ],
                  correct: 0,
                  explanation: "x += 5 is equivalent to x = x + 5.",
                },
                {
                  question: "What is the output of: 'Hello' + 'World'?",
                  options: [
                    "HelloWorld",
                    "Hello World",
                    "Error",
                    "Hello+World",
                  ],
                  correct: 0,
                  explanation: "+ operator concatenates strings in Python.",
                },
                {
                  question: "Which operator has the highest precedence?",
                  options: ["**", "*", "+", "%"],
                  correct: 0,
                  explanation:
                    "** (exponentiation) has the highest precedence in Python.",
                },
                {
                  question: "What is the output of: not True and False?",
                  options: ["True", "False", "Error", "None"],
                  correct: 1,
                  explanation:
                    "not has higher precedence: (not True) and False = False and False = False.",
                },
                {
                  question: "What does |= operator do?",
                  options: [
                    "Bitwise OR assignment",
                    "Logical OR",
                    "Union assignment",
                    "Both A and C",
                  ],
                  correct: 3,
                  explanation:
                    "|= performs bitwise OR for integers and union for sets.",
                },
              ],
            },
            "control-flow": {
              title: "Control-Flow Quiz",
              description: "Loops and conditionals",
              timeLimit: 720, // 12 min
              questions: [
                // ORIGINAL QUESTIONS
                {
                  question: "What does range(3) produce?",
                  options: ["0 1 2", "1 2 3", "0 1 2 3", "Error"],
                  correct: 0,
                  explanation: "range(3) ‚áí 0,1,2  (stop value exclusive).",
                },
                {
                  question: "Which keyword exits a loop prematurely?",
                  options: ["exit", "break", "stop", "quit"],
                  correct: 1,
                  explanation: "break leaves the loop immediately.",
                },
                // ADD THESE 10 NEW CONTROL-FLOW QUESTIONS
                {
                  question:
                    "What is the output of: for i in range(3): print(i * 2, end=' ')",
                  options: ["0 1 2", "0 2 4", "0 2 6", "0 1 2 3 4 5"],
                  correct: 1,
                  explanation: "i takes values 0, 1, 2; i * 2 gives 0, 2, 4.",
                },
                {
                  question:
                    "How many times will print be executed: for i in range(10): if i == 5: break; print(i)",
                  options: ["5 times", "10 times", "6 times", "4 times"],
                  correct: 0,
                  explanation:
                    "Loop breaks when i == 5, so prints 0, 1, 2, 3, 4 (5 times).",
                },
                {
                  question:
                    "What is the value of x after: x = 0; while x < 10: x += 2; print(x)",
                  options: ["8", "10", "12", "9"],
                  correct: 1,
                  explanation:
                    "Loop continues while x < 10, exits when x = 10.",
                },
                {
                  question: "Which keyword skips to the next iteration?",
                  options: ["skip", "next", "continue", "pass"],
                  correct: 2,
                  explanation:
                    "continue skips the rest of the current iteration.",
                },
                {
                  question:
                    "What is the output of: for i in 'Python': if i == 't': pass; print(i, end=',')",
                  options: [
                    "P,y,t,h,o,n,",
                    "P,y,h,o,n,",
                    "P,y,t,h,o,n",
                    "Error",
                  ],
                  correct: 0,
                  explanation:
                    "pass does nothing, so all characters are printed.",
                },
                {
                  question: "When is the else block of a for loop executed?",
                  options: [
                    "Always",
                    "If loop completes without break",
                    "If loop breaks",
                    "Never",
                  ],
                  correct: 1,
                  explanation:
                    "else executes only if the loop wasn't terminated by break.",
                },
                {
                  question: "What does enumerate(['a', 'b']) return?",
                  options: [
                    "[(0, 'a'), (1, 'b')]",
                    "['a', 'b']",
                    "(0, 'a'), (1, 'b')",
                    "Error",
                  ],
                  correct: 0,
                  explanation:
                    "enumerate() returns tuples of (index, value) pairs.",
                },
                {
                  question:
                    "What is the output of: nums = [1, 2, 3]; for n in nums: if n > 2: print('Large'); break; else: print('Small')",
                  options: ["Large", "Small", "Large Small", "Small Large"],
                  correct: 0,
                  explanation:
                    "Loop breaks when n = 3, so only 'Large' is printed.",
                },
                {
                  question:
                    "Which is correct list comprehension for even numbers?",
                  options: [
                    "[x for x in numbers if x % 2 == 0]",
                    "[x if x % 2 == 0 for x in numbers]",
                    "[x for x in numbers else x % 2 == 0]",
                    "[x where x % 2 == 0 in numbers]",
                  ],
                  correct: 0,
                  explanation:
                    "Correct syntax: [expression for item in iterable if condition]",
                },
                {
                  question:
                    "What is the output of: for i in range(1, 4): for j in range(1, 3): print(i * j, end=' ')",
                  options: [
                    "1 2 3 4 5 6",
                    "1 2 2 4 3 6",
                    "1 2 3 2 4 6",
                    "1 2 3 4 6 9",
                  ],
                  correct: 1,
                  explanation:
                    "Nested loops: (1√ó1, 1√ó2), (2√ó1, 2√ó2), (3√ó1, 3√ó2) = 1 2 2 4 3 6",
                },
              ],
            },
            functions: {
              title: "Functions Quiz",
              description: "Defining and calling functions",
              timeLimit: 600,
              questions: [
                // ORIGINAL QUESTION
                {
                  question: "How do you define a function in Python?",
                  options: [
                    "function foo():",
                    "def foo():",
                    "func foo():",
                    "define foo():",
                  ],
                  correct: 1,
                  explanation: "Keyword is  def foo():  .",
                },
                // ADD THESE 10 NEW FUNCTIONS QUESTIONS
                {
                  question:
                    "What is the output of: def add(a, b=5): return a + b; print(add(3))",
                  options: ["8", "3", "5", "Error"],
                  correct: 0,
                  explanation: "Default parameter used: 3 + 5 = 8",
                },
                {
                  question: "Which keyword returns a value from a function?",
                  options: ["return", "yield", "output", "give"],
                  correct: 0,
                  explanation:
                    "return keyword sends a value back from the function.",
                },
                {
                  question: "What is a lambda function?",
                  options: [
                    "Anonymous function",
                    "Recursive function",
                    "Generator function",
                    "Class method",
                  ],
                  correct: 0,
                  explanation:
                    "Lambda functions are small anonymous functions defined with lambda keyword.",
                },
                {
                  question: "What does *args allow in a function?",
                  options: [
                    "Unlimited positional arguments",
                    "Unlimited keyword arguments",
                    "Required arguments",
                    "Default arguments",
                  ],
                  correct: 0,
                  explanation:
                    "*args collects extra positional arguments into a tuple.",
                },
                {
                  question:
                    "What is the output of: def func(x, y=2): return x * y; print(func(4, 3))",
                  options: ["12", "8", "6", "7"],
                  correct: 0,
                  explanation: "y parameter overridden: 4 * 3 = 12",
                },
                {
                  question: "Which decorator indicates a static method?",
                  options: [
                    "@staticmethod",
                    "@classmethod",
                    "@property",
                    "@static",
                  ],
                  correct: 0,
                  explanation:
                    "@staticmethod decorator creates methods that don't need self parameter.",
                },
                {
                  question: "What is recursion?",
                  options: [
                    "Function calling itself",
                    "Loop inside function",
                    "Multiple returns",
                    "Function inheritance",
                  ],
                  correct: 0,
                  explanation:
                    "Recursion is when a function calls itself in its definition.",
                },
                {
                  question: "What does **kwargs collect?",
                  options: [
                    "Keyword arguments as dict",
                    "Positional arguments as list",
                    "Default values",
                    "Required arguments",
                  ],
                  correct: 0,
                  explanation:
                    "**kwargs collects extra keyword arguments into a dictionary.",
                },
                {
                  question:
                    "What is the output of: def outer(x): def inner(y): return x + y; return inner; f = outer(10); print(f(5))",
                  options: ["15", "10", "5", "Error"],
                  correct: 0,
                  explanation:
                    "Closure: inner function remembers x=10, so 10 + 5 = 15",
                },
                {
                  question:
                    "Which built-in function applies a function to all items in a list?",
                  options: ["map()", "filter()", "reduce()", "apply()"],
                  correct: 0,
                  explanation:
                    "map() applies a function to every item in an iterable.",
                },
              ],
            },
            "data-structures": {
              title: "Data-Structures Quiz",
              description: "Lists, dicts, tuples, sets",
              timeLimit: 900, // 15 min
              questions: [
                // ORIGINAL QUESTION
                {
                  question: "Which bracket type creates a list?",
                  options: ["()", "{}", "[]", "<>"],
                  correct: 2,
                  explanation: "[] ‚áí list , {} ‚áí dict , () ‚áí tuple .",
                },
                // ADD THESE 10 NEW DATA STRUCTURES QUESTIONS
                {
                  question: "What is the output of: len([1, 2, 3, [4, 5]])?",
                  options: ["5", "4", "3", "Error"],
                  correct: 1,
                  explanation:
                    "The nested list counts as one element: total 4 elements.",
                },
                {
                  question: "How do you create an empty dictionary?",
                  options: ["{}", "[]", "()", "dict()"],
                  correct: 0,
                  explanation: "{} creates an empty dictionary.",
                },
                {
                  question: "What is the output of: {1, 2, 2, 3}?",
                  options: ["{1, 2, 2, 3}", "{1, 2, 3}", "[1, 2, 3]", "Error"],
                  correct: 1,
                  explanation:
                    "Sets automatically remove duplicates: {1, 2, 3}",
                },
                {
                  question: "Which method adds an element to a list?",
                  options: ["add()", "append()", "insert()", "extend()"],
                  correct: 1,
                  explanation: "append() adds a single element to a list.",
                },
                {
                  question: "What is the output of: tuple([1, 2, 3])?",
                  options: ["(1, 2, 3)", "[1, 2, 3]", "{1, 2, 3}", "Error"],
                  correct: 0,
                  explanation: "tuple() converts a list to a tuple.",
                },
                {
                  question:
                    "How do you access the value for key 'name' in a dictionary?",
                  options: [
                    "dict['name']",
                    "dict.name",
                    "dict.get('name')",
                    "Both A and C",
                  ],
                  correct: 3,
                  explanation: "Both dict['name'] and dict.get('name') work.",
                },
                {
                  question: "What is the output of: [1, 2] + [3, 4]?",
                  options: [
                    "[1, 2, 3, 4]",
                    "[4, 6]",
                    "[1, 2], [3, 4]",
                    "Error",
                  ],
                  correct: 0,
                  explanation: "+ operator concatenates lists.",
                },
                {
                  question: "Which data structure is immutable?",
                  options: ["list", "dictionary", "tuple", "set"],
                  correct: 2,
                  explanation:
                    "Tuples are immutable - you cannot change their contents.",
                },
                {
                  question: "What does dict.keys() return?",
                  options: [
                    "List of keys",
                    "Tuple of keys",
                    "Dict_keys object",
                    "Set of keys",
                  ],
                  correct: 2,
                  explanation:
                    "dict.keys() returns a dict_keys object (view of keys).",
                },
                {
                  question:
                    "What is the output of: list(set([1, 2, 2, 3, 3, 3]))?",
                  options: [
                    "[1, 2, 3]",
                    "[1, 2, 2, 3, 3, 3]",
                    "{1, 2, 3}",
                    "Error",
                  ],
                  correct: 0,
                  explanation:
                    "set removes duplicates, list converts back to list.",
                },
              ],
            },
            oop: {
              title: "Object-Oriented Programming Quiz",
              description: "Classes, objects, inheritance, and polymorphism",
              timeLimit: 720, // 12 min
              questions: [
                {
                  question: "What keyword is used to define a class in Python?",
                  options: ["class", "def", "struct", "object"],
                  correct: 0,
                  explanation:
                    "The 'class' keyword is used to define a class in Python.",
                },
                {
                  question:
                    "What is the first parameter of every instance method?",
                  options: ["self", "this", "instance", "cls"],
                  correct: 0,
                  explanation:
                    "By convention, 'self' is the first parameter of instance methods.",
                },
                {
                  question: "What does __init__ method do?",
                  options: [
                    "Destroys the object",
                    "Initializes the object",
                    "Prints the object",
                    "Converts object to string",
                  ],
                  correct: 1,
                  explanation:
                    "__init__ is the constructor method that initializes new objects.",
                },
                {
                  question: "What is inheritance in OOP?",
                  options: [
                    "Creating multiple objects",
                    "Deriving a class from another class",
                    "Hiding data",
                    "Polymorphism",
                  ],
                  correct: 1,
                  explanation:
                    "Inheritance allows a class to derive attributes and methods from another class.",
                },
                {
                  question:
                    "What is the output of: class A: pass; a = A(); print(type(a))?",
                  options: [
                    "<class '__main__.A'>",
                    "<class 'object'>",
                    "<class 'type'>",
                    "Error",
                  ],
                  correct: 0,
                  explanation:
                    "type() returns the class of the object, which is A.",
                },
                {
                  question: "What does super() do?",
                  options: [
                    "Calls parent class methods",
                    "Creates a super object",
                    "Deletes parent class",
                    "Inherits all methods",
                  ],
                  correct: 0,
                  explanation:
                    "super() is used to call methods from the parent class.",
                },
                {
                  question: "What is encapsulation?",
                  options: [
                    "Hiding implementation details",
                    "Creating multiple classes",
                    "Inheriting from parent",
                    "Method overloading",
                  ],
                  correct: 0,
                  explanation:
                    "Encapsulation is the bundling of data and methods that operate on that data.",
                },
                {
                  question: "What is polymorphism?",
                  options: [
                    "Multiple forms of the same function",
                    "Inheriting from multiple classes",
                    "Creating objects",
                    "Method chaining",
                  ],
                  correct: 0,
                  explanation:
                    "Polymorphism allows objects of different types to be accessed through the same interface.",
                },
                {
                  question: "What is a class variable?",
                  options: [
                    "Variable inside a method",
                    "Variable shared by all instances",
                    "Local variable",
                    "Global variable",
                  ],
                  correct: 1,
                  explanation:
                    "Class variables are shared by all instances of a class.",
                },
                {
                  question: "What does @staticmethod decorator do?",
                  options: [
                    "Makes method require self",
                    "Makes method not require self or cls",
                    "Makes method private",
                    "Makes method abstract",
                  ],
                  correct: 1,
                  explanation:
                    "@staticmethod creates methods that don't need self or cls parameters.",
                },
                {
                  question: "What is method overriding?",
                  options: [
                    "Creating a new method",
                    "Redefining a method in child class",
                    "Deleting a method",
                    "Calling parent method",
                  ],
                  correct: 1,
                  explanation:
                    "Method overriding is redefining a parent class method in the child class.",
                },
                {
                  question: "What does __str__ method do?",
                  options: [
                    "Converts object to string representation",
                    "Creates string object",
                    "Prints object",
                    "Deletes object",
                  ],
                  correct: 0,
                  explanation:
                    "__str__ returns a human-readable string representation of the object.",
                },
                {
                  question: "What is multiple inheritance?",
                  options: [
                    "Inheriting from one class",
                    "Inheriting from multiple classes",
                    "Creating multiple objects",
                    "Method overloading",
                  ],
                  correct: 1,
                  explanation:
                    "Multiple inheritance allows a class to inherit from more than one parent class.",
                },
                {
                  question: "What is the MRO (Method Resolution Order)?",
                  options: [
                    "Order of method execution",
                    "Order in which Python searches for methods",
                    "Order of class definition",
                    "Order of inheritance",
                  ],
                  correct: 1,
                  explanation:
                    "MRO determines the order in which Python searches for methods in inheritance hierarchy.",
                },
                {
                  question: "What does @property decorator do?",
                  options: [
                    "Makes attribute read-only",
                    "Converts method to property",
                    "Makes method private",
                    "Creates class variable",
                  ],
                  correct: 1,
                  explanation:
                    "@property decorator converts a method into a property that can be accessed like an attribute.",
                },
              ],
            },
            "file-handling": {
              title: "File Handling & I/O Quiz",
              description: "Reading, writing, and managing files",
              timeLimit: 720, // 12 min
              questions: [
                {
                  question: "What function opens a file in Python?",
                  options: ["open()", "read()", "file()", "load()"],
                  correct: 0,
                  explanation:
                    "open() function is used to open files in Python.",
                },
                {
                  question: "What mode opens a file for reading?",
                  options: ["'w'", "'r'", "'a'", "'x'"],
                  correct: 1,
                  explanation:
                    "'r' mode opens a file for reading (default mode).",
                },
                {
                  question: "What mode opens a file for writing (overwrites)?",
                  options: ["'r'", "'a'", "'w'", "'x'"],
                  correct: 2,
                  explanation:
                    "'w' mode opens a file for writing and overwrites existing content.",
                },
                {
                  question: "What does 'a' mode do?",
                  options: [
                    "Reads file",
                    "Appends to file",
                    "Deletes file",
                    "Creates new file",
                  ],
                  correct: 1,
                  explanation:
                    "'a' mode opens a file for appending data to the end.",
                },
                {
                  question: "What method reads entire file content?",
                  options: ["read()", "readline()", "readlines()", "get()"],
                  correct: 0,
                  explanation:
                    "read() method reads the entire file content as a string.",
                },
                {
                  question: "What method reads one line at a time?",
                  options: ["read()", "readline()", "readlines()", "getline()"],
                  correct: 1,
                  explanation: "readline() reads a single line from the file.",
                },
                {
                  question: "What method writes to a file?",
                  options: ["write()", "append()", "insert()", "add()"],
                  correct: 0,
                  explanation: "write() method writes a string to the file.",
                },
                {
                  question: "What should you do after opening a file?",
                  options: [
                    "Nothing",
                    "Always close it with close()",
                    "Delete it",
                    "Read it immediately",
                  ],
                  correct: 1,
                  explanation:
                    "Files should always be closed after use to free resources.",
                },
                {
                  question: "What is the best way to ensure a file is closed?",
                  options: [
                    "Manual close()",
                    "with statement",
                    "try-finally",
                    "Both B and C",
                  ],
                  correct: 3,
                  explanation:
                    "Both 'with' statement and try-finally ensure files are closed properly.",
                },
                {
                  question: "What does 'rb' mode mean?",
                  options: [
                    "Read binary",
                    "Read bytes",
                    "Read buffer",
                    "Read boolean",
                  ],
                  correct: 0,
                  explanation: "'rb' opens file in binary read mode.",
                },
                {
                  question: "What method reads all lines into a list?",
                  options: [
                    "read()",
                    "readline()",
                    "readlines()",
                    "getlines()",
                  ],
                  correct: 2,
                  explanation:
                    "readlines() returns a list of all lines in the file.",
                },
                {
                  question: "What does file.seek(0) do?",
                  options: [
                    "Moves to end of file",
                    "Moves to beginning of file",
                    "Deletes file",
                    "Closes file",
                  ],
                  correct: 1,
                  explanation:
                    "seek(0) moves the file pointer to the beginning of the file.",
                },
                {
                  question: "What is the default encoding for open()?",
                  options: ["utf-8", "ascii", "latin-1", "cp1252"],
                  correct: 0,
                  explanation:
                    "The default encoding is platform-dependent, but utf-8 is common in Python 3.",
                },
                {
                  question: "What does 'x' mode do?",
                  options: [
                    "Reads file",
                    "Writes file",
                    "Creates new file exclusively",
                    "Appends to file",
                  ],
                  correct: 2,
                  explanation:
                    "'x' mode creates a new file exclusively, fails if file exists.",
                },
                {
                  question: "What method tells current file position?",
                  options: ["position()", "tell()", "locate()", "where()"],
                  correct: 1,
                  explanation:
                    "tell() returns the current position of the file pointer.",
                },
              ],
            },
            exceptions: {
              title: "Error Handling & Exceptions Quiz",
              description: "Try-except blocks and exception handling",
              timeLimit: 720, // 12 min
              questions: [
                {
                  question: "What keyword starts an exception handler?",
                  options: ["try", "catch", "except", "handle"],
                  correct: 0,
                  explanation:
                    "try keyword starts a block that may raise exceptions.",
                },
                {
                  question: "What keyword catches exceptions?",
                  options: ["try", "catch", "except", "handle"],
                  correct: 2,
                  explanation: "except keyword catches and handles exceptions.",
                },
                {
                  question: "What is the correct syntax for try-except?",
                  options: [
                    "try: code; except: handler",
                    "try { code } catch { handler }",
                    "try code except handler",
                    "try(code) except(handler)",
                  ],
                  correct: 0,
                  explanation:
                    "Python uses try: and except: with proper indentation.",
                },
                {
                  question: "What exception is raised for division by zero?",
                  options: [
                    "ValueError",
                    "ZeroDivisionError",
                    "ArithmeticError",
                    "MathError",
                  ],
                  correct: 1,
                  explanation:
                    "ZeroDivisionError is raised when dividing by zero.",
                },
                {
                  question:
                    "What exception is raised for invalid type conversion?",
                  options: [
                    "TypeError",
                    "ValueError",
                    "ConversionError",
                    "InvalidError",
                  ],
                  correct: 1,
                  explanation:
                    "ValueError is raised when a function receives an argument of correct type but inappropriate value.",
                },
                {
                  question: "What does finally block do?",
                  options: [
                    "Runs only if exception occurs",
                    "Runs only if no exception",
                    "Always runs",
                    "Never runs",
                  ],
                  correct: 2,
                  explanation:
                    "finally block always executes, regardless of whether an exception occurred.",
                },
                {
                  question: "What does else block do in try-except?",
                  options: [
                    "Runs if exception occurs",
                    "Runs if no exception occurs",
                    "Always runs",
                    "Never runs",
                  ],
                  correct: 1,
                  explanation:
                    "else block runs only if no exception was raised in the try block.",
                },
                {
                  question: "How do you raise an exception manually?",
                  options: ["raise", "throw", "error", "exception"],
                  correct: 0,
                  explanation:
                    "raise keyword is used to manually raise exceptions.",
                },
                {
                  question: "What does except Exception as e do?",
                  options: [
                    "Catches all exceptions",
                    "Catches only Exception type",
                    "Stores exception in variable e",
                    "Both B and C",
                  ],
                  correct: 3,
                  explanation:
                    "except Exception as e catches Exception and subclasses, storing it in variable e.",
                },
                {
                  question: "What is the base class for all exceptions?",
                  options: ["Exception", "BaseException", "Error", "Throwable"],
                  correct: 1,
                  explanation:
                    "BaseException is the base class for all built-in exceptions.",
                },
                {
                  question: "What exception is raised for undefined variable?",
                  options: [
                    "NameError",
                    "UndefinedError",
                    "VariableError",
                    "ReferenceError",
                  ],
                  correct: 0,
                  explanation:
                    "NameError is raised when a variable name is not found.",
                },
                {
                  question:
                    "What exception is raised for wrong number of arguments?",
                  options: [
                    "ArgumentError",
                    "TypeError",
                    "ValueError",
                    "SyntaxError",
                  ],
                  correct: 1,
                  explanation:
                    "TypeError is raised when a function is called with wrong number of arguments.",
                },
                {
                  question: "What does assert do?",
                  options: [
                    "Raises AssertionError if condition is False",
                    "Prints error message",
                    "Stops program",
                    "Logs error",
                  ],
                  correct: 0,
                  explanation:
                    "assert raises AssertionError if the condition evaluates to False.",
                },
                {
                  question: "What is exception chaining?",
                  options: [
                    "Multiple except blocks",
                    "Raising exception from another exception",
                    "Nested try blocks",
                    "Exception inheritance",
                  ],
                  correct: 1,
                  explanation:
                    "Exception chaining allows raising a new exception from an existing one using 'from'.",
                },
                {
                  question: "What does except (ValueError, TypeError) do?",
                  options: [
                    "Catches only ValueError",
                    "Catches only TypeError",
                    "Catches both ValueError and TypeError",
                    "Catches all exceptions",
                  ],
                  correct: 2,
                  explanation:
                    "Multiple exceptions can be caught in a tuple: except (ValueError, TypeError).",
                },
              ],
            },
            modules: {
              title: "Modules & Packages Quiz",
              description: "Importing, creating, and organizing modules",
              timeLimit: 720, // 12 min
              questions: [
                {
                  question: "What keyword imports a module?",
                  options: ["import", "include", "require", "load"],
                  correct: 0,
                  explanation:
                    "import keyword is used to import modules in Python.",
                },
                {
                  question: "What does 'from math import sqrt' do?",
                  options: [
                    "Imports entire math module",
                    "Imports only sqrt function",
                    "Imports sqrt class",
                    "Creates sqrt module",
                  ],
                  correct: 1,
                  explanation:
                    "from module import name imports only the specified name from the module.",
                },
                {
                  question: "What is __init__.py used for?",
                  options: [
                    "Initializes Python",
                    "Marks directory as package",
                    "Runs on startup",
                    "Defines main function",
                  ],
                  correct: 1,
                  explanation:
                    "__init__.py file marks a directory as a Python package.",
                },
                {
                  question: "What does 'import math as m' do?",
                  options: [
                    "Imports math with alias m",
                    "Imports module m",
                    "Creates math module",
                    "Deletes math module",
                  ],
                  correct: 0,
                  explanation:
                    "as keyword creates an alias for the imported module.",
                },
                {
                  question: "What is a module in Python?",
                  options: [
                    "A file containing Python code",
                    "A class",
                    "A function",
                    "A variable",
                  ],
                  correct: 0,
                  explanation:
                    "A module is a file containing Python definitions and statements.",
                },
                {
                  question: "What does __name__ == '__main__' check?",
                  options: [
                    "If file is imported",
                    "If file is run directly",
                    "If module exists",
                    "If function is called",
                  ],
                  correct: 1,
                  explanation:
                    "__name__ == '__main__' is True when the script is run directly, not imported.",
                },
                {
                  question: "What is a package in Python?",
                  options: [
                    "A single file",
                    "A directory containing modules",
                    "A class",
                    "A function",
                  ],
                  correct: 1,
                  explanation:
                    "A package is a directory containing multiple modules and an __init__.py file.",
                },
                {
                  question: "What does 'from module import *' do?",
                  options: [
                    "Imports all names from module",
                    "Imports module itself",
                    "Deletes module",
                    "Creates module",
                  ],
                  correct: 0,
                  explanation:
                    "* imports all public names from the module (not recommended).",
                },
                {
                  question: "What is sys.path?",
                  options: [
                    "List of directories Python searches for modules",
                    "System path variable",
                    "File path",
                    "Module name",
                  ],
                  correct: 0,
                  explanation:
                    "sys.path is a list of directory names where Python looks for modules.",
                },
                {
                  question: "What does reload() do?",
                  options: [
                    "Reloads a module",
                    "Deletes a module",
                    "Creates a module",
                    "Imports a module",
                  ],
                  correct: 0,
                  explanation:
                    "reload() (importlib.reload in Python 3) reloads a previously imported module.",
                },
                {
                  question: "What is the standard library?",
                  options: [
                    "User-created modules",
                    "Built-in modules that come with Python",
                    "Third-party packages",
                    "External libraries",
                  ],
                  correct: 1,
                  explanation:
                    "Standard library consists of modules that come with Python installation.",
                },
                {
                  question: "What does pip install do?",
                  options: [
                    "Installs Python",
                    "Installs packages from PyPI",
                    "Imports modules",
                    "Creates packages",
                  ],
                  correct: 1,
                  explanation:
                    "pip install downloads and installs packages from Python Package Index (PyPI).",
                },
                {
                  question: "What is PyPI?",
                  options: [
                    "Python Package Index",
                    "Python Program Interface",
                    "Python Package Installer",
                    "Python Program Index",
                  ],
                  correct: 0,
                  explanation:
                    "PyPI (Python Package Index) is a repository of software for Python.",
                },
                {
                  question: "What does __all__ define?",
                  options: [
                    "All functions in module",
                    "Public API of module",
                    "All variables",
                    "All classes",
                  ],
                  correct: 1,
                  explanation:
                    "__all__ defines the public API of a module when using 'from module import *'.",
                },
                {
                  question: "What is a namespace in Python?",
                  options: [
                    "A file system",
                    "A mapping from names to objects",
                    "A module name",
                    "A package name",
                  ],
                  correct: 1,
                  explanation:
                    "A namespace is a mapping from names (identifiers) to objects.",
                },
              ],
            },
            mixed: {
              title: "Mixed Challenge",
              description: "Random questions from every topic",
              timeLimit: 1200, // 20 min
              questions: [
                // ADD THESE 10 MIXED QUESTIONS
                {
                  question: "What is the output of: print('Python'[1:4])?",
                  options: ["Pyt", "yth", "thon", "Python"],
                  correct: 1,
                  explanation:
                    "String slicing [1:4] gets characters at indices 1, 2, 3: 'y', 't', 'h'.",
                },
                {
                  question: "Which exception is raised for division by zero?",
                  options: [
                    "ValueError",
                    "ZeroDivisionError",
                    "ArithmeticError",
                    "TypeError",
                  ],
                  correct: 1,
                  explanation:
                    "ZeroDivisionError is raised when dividing by zero.",
                },
                {
                  question: "What does import this do?",
                  options: [
                    "Imports random module",
                    "Shows Zen of Python",
                    "Imports this module",
                    "Error",
                  ],
                  correct: 1,
                  explanation:
                    "import this displays the Zen of Python by Tim Peters.",
                },
                {
                  question: "What is the output of: bool('False')?",
                  options: ["True", "False", "Error", "None"],
                  correct: 0,
                  explanation:
                    "Non-empty strings are truthy, so bool('False') is True.",
                },
                {
                  question: "Which method removes whitespace from both ends?",
                  options: ["strip()", "trim()", "remove()", "clean()"],
                  correct: 0,
                  explanation:
                    "strip() removes whitespace from both ends of a string.",
                },
                {
                  question: "What is the output of: max([1, 5, 2, 8, 3])?",
                  options: ["8", "1", "5", "3"],
                  correct: 0,
                  explanation:
                    "max() returns the largest value in the iterable.",
                },
                {
                  question: "What does __init__ represent in a class?",
                  options: [
                    "Destructor",
                    "Constructor",
                    "Initializer",
                    "Both B and C",
                  ],
                  correct: 3,
                  explanation:
                    "__init__ is the constructor/initializer method in Python classes.",
                },
                {
                  question:
                    "What is the output of: sorted('python', reverse=True)?",
                  options: [
                    "['y', 't', 's', 'o', 'n', 'h', 'p']",
                    "['y', 't', 's', 'r', 'q', 'p', 'o', 'n', 'm', 'l', 'k', 'j', 'i', 'h']",
                    "['y', 't', 's', 'r', 'q', 'p', 'o', 'n', 'm', 'l', 'k', 'j', 'i', 'h', 'g']",
                    "['y', 't', 's', 'r', 'q', 'p', 'o', 'n', 'm', 'l', 'k', 'j', 'i', 'h', 'g', 'f']",
                  ],
                  correct: 0,
                  explanation:
                    "sorted() with reverse=True sorts in descending order: y, t, s, r, q, p, o, h",
                },
                {
                  question: "What does * do in function parameters?",
                  options: [
                    "Keyword arguments",
                    "Variable positional arguments",
                    "Default arguments",
                    "Required arguments",
                  ],
                  correct: 1,
                  explanation:
                    "*args allows a function to accept any number of positional arguments.",
                },
                {
                  question: "What is the output of: 'hello'.count('l')?",
                  options: ["1", "2", "3", "4"],
                  correct: 1,
                  explanation:
                    "count() returns the number of occurrences: 'l' appears twice in 'hello'.",
                },
              ],
            },
          };

          /* ---------------  MIXED BUILDER  ----------------- */
          const allQuestions = Object.values(this.quizData)
            .flatMap((q) => q.questions)
            .filter((q) => q); // skip empty mixed array
          this.quizData.mixed.questions = allQuestions
            .map((q) => ({ ...q, question: q.question.replace("**", "") })) // remove markdown
            .sort(() => Math.random() - 0.5)
            .slice(0, 25);

          this.init();
        }

        /* -------------------------------------------------- */
        init() {
          this.setupEventListeners();
          this.loadPerformanceData();
        }

        setupEventListeners() {
          // topic cards
          document
            .querySelectorAll(".topic-card")
            .forEach((card) =>
              card.addEventListener("click", () =>
                this.selectTopic(card.dataset.topic)
              )
            );

          // nav
          document
            .getElementById("next-button")
            .addEventListener("click", () => this.nextQuestion());
          document
            .getElementById("prev-button")
            .addEventListener("click", () => this.prevQuestion());
          document
            .getElementById("skip-button")
            .addEventListener("click", () => this.skipQuestion());

          // results
          document
            .getElementById("retake-quiz")
            .addEventListener("click", () => this.retakeQuiz());
          document
            .getElementById("review-answers")
            .addEventListener("click", () => this.reviewAnswers());
          document
            .getElementById("try-another-topic")
            .addEventListener("click", () => this.tryAnotherTopic());
        }

        /* -------------------------------------------------- */
        selectTopic(topic) {
          const data = this.quizData[topic];
          if (!data) return;

          this.currentTopic = topic;
          this.questions = data.questions;
          this.currentIndex = 0;
          this.score = 0;
          this.answers = [];
          this.timeRemaining = data.timeLimit;
          this.startTime = Date.now();

          // UI switch
          document.getElementById("topic-selection").classList.add("hidden");
          document.getElementById("quiz-interface").classList.remove("hidden");
          document.getElementById("quiz-results").classList.add("hidden");

          // header
          document.getElementById("quiz-title").textContent = data.title;
          document.getElementById("quiz-description").textContent =
            data.description;

          this.startTimer();
          this.loadQuestion();
        }

        startTimer() {
          this.timer = setInterval(() => {
            this.timeRemaining--;
            this.updateTimerDisplay();
            if (this.timeRemaining <= 0) this.finishQuiz();
          }, 1000);
        }

        updateTimerDisplay() {
          const min = Math.floor(this.timeRemaining / 60);
          const sec = this.timeRemaining % 60;
          const display = `${min}:${sec.toString().padStart(2, "0")}`;
          document.getElementById("quiz-timer").textContent = display;

          const wrap = document.getElementById("timer-card");
          wrap.classList.toggle("warning", this.timeRemaining <= 60);
          if (this.timeRemaining <= 60) {
            document.getElementById("quiz-timer").style.color = "#dc2626";
          } else {
            document.getElementById("quiz-timer").style.color = "#92400e";
          }
        }

        loadQuestion() {
          const q = this.questions[this.currentIndex];
          if (!q) return;

          document.getElementById("current-question").textContent =
            this.currentIndex + 1;
          document.getElementById("question-number").textContent = `Question ${
            this.currentIndex + 1
          } of ${this.questions.length}`;

          const progress =
            ((this.currentIndex + 1) / this.questions.length) * 100;
          document.getElementById("quiz-progress").textContent = `${Math.round(
            progress
          )}%`;
          document.getElementById("progress-fill").style.width = `${progress}%`;

          document.getElementById("question-text").textContent = q.question;

          const container = document.getElementById("options-container");
          container.innerHTML = "";
          q.options.forEach((opt, i) => {
            const btn = document.createElement("button");
            btn.className = "option-button";
            btn.dataset.option = i;
            btn.textContent = `${String.fromCharCode(65 + i)}. ${opt}`;
            btn.addEventListener("click", () => this.selectAnswer(i));
            container.appendChild(btn);
          });

          document.getElementById("feedback-container").innerHTML = "";
          document.getElementById("prev-button").disabled =
            this.currentIndex === 0;
          document.getElementById("next-button").disabled = true;
          document.getElementById("skip-button").disabled = false;
        }

        selectAnswer(idx) {
          const q = this.questions[this.currentIndex];
          const ok = idx === q.correct;

          this.answers[this.currentIndex] = {
            selected: idx,
            correct: ok,
            question: q.question,
          };
          if (ok) {
            this.score++;
            document.getElementById("quiz-score").textContent = this.score;
          }

          // colour buttons
          document.querySelectorAll(".option-button").forEach((b, i) => {
            b.disabled = true;
            if (i === idx) b.classList.add(ok ? "correct" : "incorrect");
            if (i === q.correct) b.classList.add("correct");
          });

          this.showFeedback(ok, q.explanation);
          document.getElementById("next-button").disabled = false;
          document.getElementById("skip-button").disabled = true;
        }

        showFeedback(ok, explanation) {
          const box = document.getElementById("feedback-container");
          const cls = ok ? "feedback-correct" : "feedback-incorrect";
          const icon = ok ? "‚úÖ" : "‚ùå";
          const txt = ok ? "Correct!" : "Incorrect";
          box.innerHTML = `
          <div class="feedback-panel ${cls}">
            <div class="flex items-center mb-2"><span class="text-2xl mr-2">${icon}</span><span class="font-bold">${txt}</span></div>
            <div class="feedback-panel feedback-explanation"><p><strong>Explanation:</strong> ${explanation}</p></div>
          </div>`;
        }

        nextQuestion() {
          if (this.currentIndex < this.questions.length - 1) {
            this.currentIndex++;
            this.loadQuestion();
          } else {
            this.finishQuiz();
          }
        }
        prevQuestion() {
          if (this.currentIndex > 0) {
            this.currentIndex--;
            this.loadQuestion();
          }
        }
        skipQuestion() {
          this.answers[this.currentIndex] = {
            selected: -1,
            correct: false,
            question: this.questions[this.currentIndex].question,
            skipped: true,
          };
          this.nextQuestion();
        }

        finishQuiz() {
          if (this.timer) clearInterval(this.timer);
          const totalTime = Math.floor((Date.now() - this.startTime) / 1000);
          this.showResults(
            Math.round((this.score / this.questions.length) * 100),
            totalTime
          );
        }

        showResults(percentage, totalTime) {
          document.getElementById("quiz-interface").classList.add("hidden");
          document.getElementById("quiz-results").classList.remove("hidden");

          const deg = (percentage / 100) * 360;
          document.getElementById(
            "score-circle"
          ).style.background = `conic-gradient(#3b82f6 ${deg}deg, #e2e8f0 ${deg}deg)`;

          document.getElementById("final-score").textContent = `${percentage}%`;
          document.getElementById("correct-answers").textContent = this.score;
          document.getElementById("incorrect-answers").textContent =
            this.questions.length - this.score;

          const min = Math.floor(totalTime / 60);
          const sec = totalTime % 60;
          document.getElementById("total-time").textContent = `${min}:${sec
            .toString()
            .padStart(2, "0")}`;
          document.getElementById("score-message").textContent =
            this.getScoreMessage(percentage);

          this.saveResults(percentage, totalTime);
        }

        getScoreMessage(pct) {
          if (pct >= 90) return "Outstanding! You have mastered this topic. üéâ";
          if (pct >= 80)
            return "Excellent work! You have a strong understanding. üëè";
          if (pct >= 70) return "Good job! You're on the right track. üëç";
          if (pct >= 60) return "Not bad! Keep practicing to improve. üí™";
          return "Keep learning! Practice makes perfect. üìö";
        }

        saveResults(percentage, time) {
          const res = {
            topic: this.currentTopic,
            score: percentage,
            correct: this.score,
            total: this.questions.length,
            time,
            date: new Date().toISOString(),
          };
          const saved = JSON.parse(
            localStorage.getItem("quiz-results") || "[]"
          );
          saved.push(res);
          localStorage.setItem("quiz-results", JSON.stringify(saved));
        }

        retakeQuiz() {
          this.selectTopic(this.currentTopic);
        }
        reviewAnswers() {
          alert("Answer-review sheet coming soon!");
        }
        tryAnotherTopic() {
          document.getElementById("quiz-results").classList.add("hidden");
          document.getElementById("topic-selection").classList.remove("hidden");
        }

        /* -------------------------------------------------- */
        /*  CHARTS ‚Äì only render when ECharts lib is ready   */
        /* -------------------------------------------------- */
        loadPerformanceData() {
          if (typeof echarts === "undefined") return;
          const saved = JSON.parse(
            localStorage.getItem("quiz-results") || "[]"
          );
          if (saved.length) {
            this.createScoreChart(saved);
            this.createTopicChart(saved);
          }
        }
        createScoreChart(data) {
          const chart = echarts.init(document.getElementById("score-chart"));
          const last = data.slice(-10);
          chart.setOption({
            tooltip: { trigger: "axis" },
            xAxis: {
              type: "category",
              data: last.map((_, i) => `Quiz ${i + 1}`),
            },
            yAxis: { type: "value", min: 0, max: 100 },
            series: [
              {
                data: last.map((r) => r.score),
                type: "line",
                smooth: true,
                itemStyle: { color: "#3b82f6" },
                areaStyle: { color: "rgba(59,130,246,.1)" },
              },
            ],
          });
        }
        createTopicChart(data) {
          const chart = echarts.init(document.getElementById("topic-chart"));
          const avg = {};
          data.forEach((r) => {
            if (!avg[r.topic]) avg[r.topic] = [];
            avg[r.topic].push(r.score);
          });
          const pieData = Object.keys(avg).map((k) => ({
            name: k.charAt(0).toUpperCase() + k.slice(1),
            value: (avg[k].reduce((a, b) => a + b, 0) / avg[k].length).toFixed(
              1
            ),
          }));
          chart.setOption({
            tooltip: { trigger: "item" },
            series: [{ type: "pie", radius: "60%", data: pieData }],
          });
        }
      }

      /* ------------------  BOOTSTRAP  ------------------ */
      document.addEventListener("DOMContentLoaded", () => {
        window.pythonQuiz = new PythonQuiz();
      });
    </script>
  </body>
</html>
